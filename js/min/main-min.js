$(document).ready(function(){function a(t){$("input").each(function(t){var a,e=$(this),c=e.attr("data-type"),n=(e.attr("data-var"),e.val().replace(/\;/g,"").replace(/\s/g,"")),o="#",s=/\#/;if("var"==c&&(o="$",s=/\$/),""!==n&&null==n.match(s)&&r(e,n=o+n),$("[data-calc]")&&(a=$(this).attr("data-calc")),"from"==a)e.css("border-color",n),l("scfc-from",n),$('.faves__itm *[data-type="col"]').each(function(){if($(this).val()===v.val())return d=$(this).val(),m=$(this).siblings('[data-type="var"]').val(),!1;m=d=""});else if("to"==a)e.css("border-color",n),l("scfc-to",n);else if("col"==c){e.parent(".border").css("border-color",n);var i=e.siblings("[data-type='var']").val();""!==n&&u.push([i,n])}}),t(u),C=v.val(),y=n.val(),function(t,a){if(""!==C&&""!==y){var e=h(C),c=h(y);if(void 0!==e&&void 0!==c){var n,o,s=[h(C),h(y)],i=s[0][0],l=s[1][0],r=s[0][1],u=s[1][1],f=s[0][2],v=s[1][2],p=l-i,d=u-r,m=v-f;strOutput=C.toUpperCase();var _=parseInt(g(i-l));0===_&&-0===_||(l<i&&(p=360-(i-l)),"360"!==(p=g(p,1))&&(strOutput="adjust-hue("+strOutput+", "+p+")")),0!==d&&(r<u?n="saturate":(d=r-u,n="desaturate"),strOutput=n+"("+strOutput+", "+g(d,1)+")"),0!==m&&(f<v?o="lighten":(m=f-v,o="darken"),strOutput=o+"("+strOutput+", "+g(m,1)+")")}else strOutput="";a&&(strOutput=strOutput.replace(t.toUpperCase(),a)),$(b).text(strOutput)}}(d,m),$(".faves__itm").length?f.addClass("full"):f.removeClass("full")}function o(t){return("; "+document.cookie).split("; "+t+"=").pop().split(";").shift()}function l(t,a){var e=new Date;e.setTime(e.getTime()+1728e6),document.cookie=t+"="+a+";path=/;expires="+e.toUTCString()}function s(t,a){$(".faves__form").append("<div class='faves__itm border input__group'><input data-type='col' data-var='' value='"+a+"' tabindex='1'><input data-type='var' value='"+t+"' tabindex='1'><button class='calc__faves__btn btn calc__faves--apply'><svg><use xlink:href='#icon_arrow' x='0' y='0'></use></svg></button></div>"),$(".faves__itm").last().children("input").first().focus()}function r(t,a){t.css(e,a).val(a)}function g(t,a){return t.toFixed(a).replace(/\.0/g,"")}function h(t){var a;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(t)){3==(a=t.substring(1).split("")).length&&(a=[a[0],a[0],a[1],a[1],a[2],a[2]]);var e=(a="0x"+a.join(""))>>16&255,c=a>>8&255,n=255&a;e=e/=255,c=c/=255,n=n/=255;var o,s,i=Math.max(e,c,n),l=Math.min(e,c,n),r=(i+l)/2;if(i==l)o=s=0;else{var u=i-l;switch(s=.5<r?u/(2-i-l):u/(i+l),i){case e:o=(c-n)/u+(c<n?6:0);break;case c:o=(n-e)/u+2;break;case n:o=(e-c)/u+4}o/=6}return[360*o,100*s,100*r]}}var u=[],t=$(window),f=$(".faves"),e="border-color",c=$(".calc__output"),b=".calc__output--val",v=$('[data-calc="from"]'),n=$('[data-calc="to"]'),p=$(".faves__import"),C=v.val(),y=n.val(),d="",m="";t.on("load",function(){!function(t){var a=o("scfc-faves");if(a){a=JSON.parse(a);for(var e=0;e<a.length;e++)s(a[e][0],a[e][1])}var c=o("scfc-from"),n=o("scfc-to");""==c&&(c="#FF0000"),""==n&&(n="#AA0000"),$('[data-calc="from"]').val(c),$('[data-calc="to"]').val(n),t()}(function(){a(function(){t.addClass("loaded")})})}),$(".main__form input").on("focus",function(){f.addClass("closed")}),$(".calc__faves--expand").on("click",function(){f.toggleClass("closed").removeClass("confirm").removeClass("import"),$("html").removeClass("view-changelog")}),$(".calc__faves--add").on("click",function(){s("",""),f.removeClass("import confirm"),$("html").removeClass("view-changelog")}),$(".calc__faves--import").on("click",function(){f.toggleClass("import"),f.removeClass("confirm"),$("html").removeClass("view-changelog")}),$(".calc__faves--clear").on("click",function(){f.addClass("confirm")}),$(".calc__faves--confirm .btn").on("click",function(){$(".faves__itm").remove(),setTimeout(function(){a(function(){l("scfc-faves","")}),f.removeClass("confirm")},10)}),$(".changelog__btn").on("click",function(){$("html").toggleClass("view-changelog")}),c.on("click",function(){""!==$(b).text()&&$(this).addClass("active")}),$(document).on("webkitAnimationEnd oanimationend msAnimationEnd animationend",".calc__output--success",function(t){c.removeClass("active")}),$(document).on("click",".calc__faves--apply",function(t){t.preventDefault(),r($('[data-calc="from"]'),$(this).siblings("[data-var]").val()),$('[data-calc="from"]').attr("data-var",$(this).siblings('[data-type="var"]').val()),a(function(){})}),$(document).on("change paste keypress blur","input:not(.faves__import)",function(){setTimeout(function(){u=[],a(function(){l("scfc-faves",JSON.stringify(u))})},0)});var _=!1;p.focus(function(){_=!0}),p.blur(function(){_=!1}),$(document).keypress(function(t){if(13==t.which&&_){t.preventDefault();var a=p.val(),e=(a=(a=(a=(a=(a=(a=a.replace(/\#/g,":#")).replace(/\$/g,";$")).replace(/\;/g,";$")).toString()).replace(/\s/g,"")).replace(/([\/]).*?([/])/g,"")).split(";");for(i=0;i<e.length;i++){var c=e[i];if(""!=c&&"$"!=(c=(c=(c=c.replace("$$","$")).replace("::",":")).replace("mason-hex-",""))){var n=c.split(":");s(n[0],n[1])}}f.removeClass("import"),setTimeout(function(){p.val("")},300)}}),$(document).on("click",b,function(t){t.preventDefault();var a=document.createElement("textarea");a.style.position="absolute",a.style.left="-9999px",a.style.top="0",a.id="_hiddenCopyText_",document.body.appendChild(a),a.textContent=$(this).text();var e,c=document.activeElement,n=window.scrollX,o=window.scrollY;a.focus(),window.scrollTo(n,o),a.setSelectionRange(0,a.value.length);try{e=document.execCommand("copy")}catch(t){e=!1}return c&&"function"==typeof c.focus&&c.focus(),a.remove(),e})});